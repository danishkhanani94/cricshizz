"use strict";!function(e){e.account="ICC",e.templates={},e.common={},e.defaultLanguage="EN",e.widgets={},e.paths=[{label:"production",domain:["icc-cricket.com","stage-icc.pulselive.com","localhost"],cdn:"//stage-icc.pulselive.com/resources/{$ICC_CRICKET_RESOURCES_VERSION$}/",api:"//content-icc.pulselive.com",cms:"//content-icc.pulselive.com/content/icc",cmsSearch:"//content-icc.pulselive.com/search/icc",cricket:"//cricketapi-icc.pulselive.com",sso:{id:"icc-sso-web",auth:"https://sso.fanaccount.icc-cricket.com/auth/"}}].map((e=>(e.cdn=e.cdn.replace("{$ICC_CRICKET_RESOURCES_VERSION$}",window.RESOURCES_VERSION),e))),e.checkEnvironment=()=>{const a=window.location.hostname;let n;for(let o=0;o<e.paths.length;o++){const r=e.paths[o];if("undefined"!=typeof browsersyncProxy&&("localhost"===a||/^(?=.*[^\.]$)((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.?){4}$/gim.test(a))){browsersyncProxy=browsersyncProxy.replace("https://","");const t=e.paths.findIndex((e=>e.domain.indexOf(browsersyncProxy)>-1));n=e.paths[t],n.cdn="/";break}if(Array.isArray(r.domain)){const e=t(r.domain,a);if(e){r.domain=e,n=r;break}}else if(a===r.domain||a.match(new RegExp(r.domain))){n=r;break}}return n||console.error("There are no app.paths defined for this domain"),n};const t=(e,t)=>{for(let a=0;a<e.length;a++){const n=e[a];if(t===n||t.match(new RegExp(n)))return n}return null};e.environment=e.checkEnvironment();document.addEventListener("DOMContentLoaded",(()=>{e.I18N.setup(),objectFitImages()}))}(PULSE.app),function(e){e.FilterGroups={};const t=e=>e.map((e=>e.label)).join(",");e.FilterGroups.CONTENT=[{fylterConfig:{name:"Category"},getDefaultFromSearchParams:e=>{try{return t(e.tags.tags)}catch(e){console.warn("ContentFilter getOptionsFromSearchParams, could not find tags on searchQuery",e)}return-1},getOptionsFromSearchParams:e=>{let a="";try{a=t(e.tags.tags)}catch(e){console.warn("ContentFilter getOptionsFromSearchParams, could not find tags on searchQuery",e)}const n=[{name:"All",value:-1},{name:"First Team News",value:"news,first team"}];if(n.filter((e=>e.value===a)).length||!a)return n;return[...n,{name:a,value:a}]}},{fylterConfig:{name:"Competition",data:()=>[{name:"All",value:-1},{name:"Premier League",value:"FOOTBALL_COMPETITION:1"},{name:"Champions League",value:"FOOTBALL_COMPETITION:2"}]},getDefaultFromSearchParams:e=>e.references&&e.references.length?"".concat(e.references[0].contentType,":").concat(e.references[0].reference):-1}],e.FilterGroups.CRICKET=[{fylterConfig:{name:"Date"},getOptionsFromSearchParams:e=>{const t=new Date(e.endDate).getFullYear();return[{name:"All",value:-1},...[t,t-1,t-2,t-3].map((e=>({name:e,value:"01-01-".concat(e)})))]},getDefaultFromSearchParams:e=>{const t=new Date(e.endDate).getFullYear();return"01-01-".concat(t)}},{fylterConfig:{name:"Match Types",data:()=>[{name:"All",value:"ALL"},{name:"Test",value:"TEST"},{name:"ODI",value:"ODI"},{name:"T20I",value:"T20I"},{name:"IPLT20",value:"IPLT20"},{name:"CLT20",value:"CLT20"},{name:"T20",value:"T20"},{name:"List A",value:"LIST_A"},{name:"First Class",value:"FIRST_CLASS"},{name:"World Cup",value:"CWC"},{name:"Other",value:"OTHER"}]},getDefaultFromSearchParams:e=>e.matchTypes[0]},{fylterConfig:{name:"Team Types",data:()=>[{name:"Mens",value:"m"},{name:"Womens",value:"w"},{name:"Men Youth",value:"my"}]},getDefaultFromSearchParams:e=>e.teamTypes[0]}],e.FilterGroups.FOOTBALL=[{fylterConfig:{name:"Competition",data:()=>"//api.dev.platform.pulselive.com/football/competitions?page=0&pageSize=20&detail=1",middleWares:{beforeOptionUpdate:e=>{const t=e.data.content.map((e=>({name:e.description,value:e.id,extra:e})));return[{name:"All Comps",value:"-1"}].concat(t)}}},getDefaultFromSearchParams:e=>e.comps[0]},{fylterConfig:{name:"CompSeason",dependsOn:["Competition"],data:()=>"//api.dev.platform.pulselive.com/football/competitions/{{Competition}}/compseasons?page=0&pageSize=100",middleWares:{beforeOptionUpdate:e=>{const t=e.data.content.map((e=>({name:e.label,value:e.id})));return[{name:"All CompSeasons",value:"-1"}].concat(t)},decideFilterEnabledState:e=>"-1"!==e[0].getCurrentOption().value}},getDefaultFromSearchParams:e=>e.compSeasons[0]},{fylterConfig:{name:"GameWeeks",dependsOn:["CompSeason"],data:()=>"//api.dev.platform.pulselive.com/football/compseasons/{{CompSeason}}/gameweeks",middleWares:{beforeOptionUpdate:e=>{const t=e.data.gameweeks.map((e=>({name:e.gameweek,value:e.id,extra:e})));return[{name:"All Gameweeks",value:"-1"}].concat(t)},decideFilterEnabledState:e=>"-1"!==e[0].getCurrentOption().value}},getDefaultFromSearchParams:e=>e.gameweeks[0]},{fylterConfig:{name:"HomeAway",data:()=>[{name:"Home",value:"home"},{name:"Away",value:"away"}]}}],e.FilterGroups.FootballFixturesList=[{fylterConfig:{name:"selectteam",middleWares:{beforeOptionUpdate:e=>{let{data:t}=e;return t.teams.map((e=>({name:PULSE.I18N.lookup("label.team.type.".concat(e.teamType)),value:e.id})))}}},getDefaultFromSearchParams:e=>e.footballFilters.teams[0],getOptionsFromSearchParams:t=>{const a=t.footballClubList[0];return"".concat(e.environment.api,"/football/clubs/").concat(a.id,"?language=").concat(e.language)}},{fylterConfig:{name:"selectcompetition",dependsOn:["selectteam"],data:()=>"".concat(e.environment.api,"/football/competitions/?teams={{selectteam}}&pageSize=20"),middleWares:{beforeOptionUpdate:e=>{let{data:t}=e;const a=t.content.map((e=>({name:e.description,value:e.id})));return[{name:PULSE.I18N.lookup("label.all"),value:-1},...a]}}},getDefaultFromSearchParams:e=>e.footballFilters.comps[0]},{fylterConfig:{name:"selectseason",dependsOn:["selectcompetition"],data:()=>"".concat(e.environment.api,"/football/competitions/{{selectcompetition}}/compseasons?pageSize=100"),middleWares:{beforeOptionUpdate:e=>{let{data:t}=e;return t.content.map((e=>({name:e.label,value:e.id})))},decideFilterEnabledState:e=>"-1"!==e[0].getCurrentId().toString()}},getDefaultFromSearchParams:e=>e.footballFilters.compSeasons[0]}]}(PULSE.app),dayjs.extend(window.dayjs_plugin_duration),dayjs.extend(window.dayjs_plugin_utc),dayjs.extend(window.dayjs_plugin_timezone),function(e,t){e.I18N={},e.I18N.setup=()=>{const a=t.localStorage.getStorage("req_language",!0);e.language=a||e.defaultLanguage;const n=new e.I18N.Translator(PULSE.I18N);PULSE.I18N||(PULSE.I18N={}),PULSE.I18N.lookup=function(){return n.lookup.apply(n,arguments)},PULSE.I18N.lookupKey=function(){return n.lookupKey.apply(n,arguments)},void 0!==window.dayjs&&dayjs.locale(e.language)},e.I18N.Translator=function(t){this.hasTranslations=!1,this.language=e.language,t?(this.hasTranslations=!0,this.language!==t.language&&(void 0===t.language&&console.warn("Language mismatch! Using "+t.language),this.language=t.language),this.translations=t.translations||{},this.hasTranslations=!0):(this.hasTranslations=!1,this.translations={})},e.I18N.Translator.prototype.lookup=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&t){let a=this.lookupKey(e);for(let e in t)if({}.hasOwnProperty.call(t,e)){let n=new RegExp("\\${"+e+"}","gi");a=a.replace(n,t[e])}return a}return""},e.I18N.Translator.prototype.lookupKey=function(e){return this.hasTranslations&&this.translations[e]||e}}(PULSE.app,PULSE.core),PULSE.app.measurements={mobile:360,phablet:640,tablet:840,desktop:1025,wide:1300};const onReady=function(e){const t=this;t.SSO.ready=!0,document.dispatchEvent(new CustomEvent(t.settings.onReadyEventName||"PULSELIVE.SSO.READY",{detail:{ready:!0}})),t.settings.onReadyCallback&&t.settings.onReadyCallback(e)},onAuthError=function(){console.warn("SSO Authentication Error"),localStorage.removeItem("kc_token"),localStorage.removeItem("kc_refreshToken")},onTokenExpired=function(){const e=this;e.SSO.updateToken().success((()=>{localStorage.setItem("kc_token",e.SSO.token),localStorage.setItem("kc_refreshToken",e.SSO.refreshToken)})).error((()=>{console.warn("failed to update token on expired removing tokens from localStorage"),localStorage.removeItem("kc_token"),localStorage.removeItem("kc_refreshToken")}))},PulseliveSSO=function(e){const t=this;if("undefined"==typeof Keycloak)return void console.warn("PulseliveSSO config error: window.Keycloak is not available");if("string"!=typeof e.kcUrl)return void console.warn("PulseliveSSO config error: config.kcUrl must be provided as a string");if("string"!=typeof e.kcRealm)return void console.warn("PulseliveSSO config error: config.kcRealm must be provided as a string");if("string"!=typeof e.kcClientId)return void console.warn("PulseliveSSO config error: config.kcClientId must be provided as a string");t.SSO=new Keycloak({url:e.kcUrl,realm:e.kcRealm,clientId:e.kcClientId}),t.settings=e,t.SSO.onReady=onReady.bind(t),t.SSO.onAuthError=onAuthError.bind(t),t.SSO.onTokenExpired=onTokenExpired.bind(t),"function"==typeof t.settings.onAuthSuccess&&(t.SSO.onAuthSuccess=t.settings.onAuthSuccess);const a=localStorage.getItem("kc_token"),n=localStorage.getItem("kc_refreshToken");try{t.SSO.init({onLoad:"check-sso",token:a,refreshToken:n,timeSkew:0,silentCheckSsoRedirectUri:window.location.origin+"/sso-silent-check",silentCheckSsoFallback:!1,checkLoginIframe:!1}).success((e=>{e?(localStorage.setItem("kc_token",t.SSO.token),localStorage.setItem("kc_refreshToken",t.SSO.refreshToken)):(localStorage.removeItem("kc_token"),localStorage.removeItem("kc_refreshToken")),t.SSO.onReady(e)})).error((e=>{console.warn("SSO init error: ".concat(e))}))}catch(e){return void console.warn("Error initiating SSO: ".concat(e))}return t.SSO};!function(e,t){const a=function(t){const a={redirectUri:encodeURI(window.location.href)},n={redirectUri:encodeURI(window.location.href),action:"register"},o=document.querySelectorAll(".js-sso-display"),r=t?"common.authenticated":"common.unauthenticated";o.forEach((t=>{t.innerHTML=e.templating.render({sso:e.SSO,loginOptions:a,registerOptions:n},r)}))};document.addEventListener("DOMContentLoaded",(function(){let n={kcUrl:e.environment.sso.auth,kcRealm:"ICC",kcClientId:e.environment.sso.id,onReadyEventName:t.constants.SSO.ready,onReadyCallback:a};e.SSO=new PulseliveSSO(n)}))}(PULSE.app,PULSE.app.common),function(e,t,a,n){e.templating={},e.templating.helper={},e.templating.render=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r="";for(var i in e.templating)e.templating.hasOwnProperty(i)&&(t[i]=e.templating[i]);if(t.environment=e.environment,t.helper.date=e.common.date,t.helper.template=e.common.template,t.helper.image=e.common.image,a){var s=e.templates[a];if(s){try{r=s(t)}catch(e){e.message&&(e.message+=" in template "+a),console.warn(e),console.info("Model given",t)}if(n)return o(r)}else console.warn("No template was rendered. Template not found: "+a)}return r};const o=e=>{let t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild};e.templating.helper.cricket={matchIsWtc:e=>!!(e&&e.metaData&&e.metaData["is-wtc"]),matchIsOnICCTV:e=>!!(e&&e.metaData&&e.metaData.isOnICCTV),matchIsU19:function(e){return!(!e.metaData||!e.metaData["is-u19"])},getMatchTypeLabel:t=>{if(!t)return"";if(e.templating.helper.cricket.matchIsWtc(t))return"WTC";var a=t.scheduleEntry?t.scheduleEntry.matchType:t.matchType;switch(a){case"TEST":return"Test";case"FIRST_CLASS":return"First Class";case"LIST_A":return"List A";case"ODI":case"WODI":return"ODI";case"T20":case"WT20":return"T20";case"T20I":case"WT20I":return"T20I";case"OTHER":return"Other";default:return a}},getInningsLabel:(e,t)=>{if(e&&e.match.battingOrder.length){t=t>-1?t:e.currentState.currentInningsIndex||0;var a=e.match.matchSummary,n=e.getTeam(e.match.battingOrder[t]),o=n.shortName?n.shortName:n.longName;return o=a&&n.abbreviation?n.abbreviation:o,e.isLimitedOvers()?o+" Innings":o+(t>1?" 2nd ":" 1st ")+"Innings"}return""},getCurrentBattingTeamID:(e,t)=>e&&e.match.battingOrder.length?(t=t>-1?t:e.currentState.currentInningsIndex||0,e.getTeam(e.match.battingOrder[t]).id):"",getPlayerHeadshotUrl:(e,t,a,n)=>{e=e||"Photo-Missing",t=t||"284",a=a||"png";var o="https://resources.pulse.icc-cricket.com/players/";return""!==(n=n||"")?o+n+"/"+t+"/"+e+"."+a:o+t+"/"+e+"."+a},getMatchDateRange:(e,t)=>{var a=t||"ddd D",n=t||"ddd D MMMM";return e.getEndDate&&e.getDate().getDate()!==e.getEndDate().getDate()?e.getDate().getMonth()===e.getEndDate().getMonth()?moment(e.getDate()).format(a)+" - "+moment(e.getEndDate()).format(n):moment(e.getDate()).format(n)+" - "+moment(e.getEndDate()).format(n):moment(e.getDate()).format(n)},getTeamName:e=>{var t=e.shortName,a="w"==e.type?" Women":"";return"".concat(t).concat(a)},getFormattedDate:(e,t,a,n)=>{var o=n||e.date;if(o){var r=moment(o);switch(t){case"local":return moment(o).utc().add(e.timezoneOffset,"hours").format(a);case"GMT":return r.utc().format(a);default:return moment(o).format(a)}}return""},getVenueString:(e,t)=>{var a="TBC";return e?(t&&t.id&&e.metadata&&e.metadata["display_name_"+t.id]?a=e.metadata["display_name_"+t.id]:"TBC"!==e.fullName&&(a=e.shortName||e.fullName),e.city&&(a+=", "+e.city),a):a},getTeamScore:(t,a)=>{var o=n.utils.getInningsByTeamIndex(t,a.matchInfo.battingOrder,null,a.innings);return e.templating.helper.cricket.scoreToString(o)},scoreToString:e=>e.map((function(e){return n.utils.getInningsScore(e.runs,e.wkts,e.allOut,e.declared)})).join(" & "),getTeamOverString:(e,t)=>t[e].score.length?"(".concat(t[e].score[0].overProgress," ov)"):"",getCurrentOverStringFromInnings:e=>"(".concat(e.innings[e.currentState.currentInningsIndex].overProgress,"ov)"),getTeamTheming:(e,t)=>e,getMatchTheme:t=>"theme theme-".concat(e.templating.helper.cricket.getMatchTypeLabel(t).toLowerCase().replace(" ","_")),getBallClass:e=>{var t=function(e){return"6"===e?"--six":"4"===e?"--four":e.match(/W(?!d)/)?"--wicket":"."===e?"--dot":e.length>1?"--small":""}(e);return t?"over-stream__ball"+t:""}}}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.cricket),function(e){const t=[];e.widgetDeps=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!e.environment)return;const n=[].slice.call(t.querySelectorAll("[data-script]"));n.forEach((e=>{e.dataset.script.split(",").map((e=>e.trim())).forEach((e=>a(e)))}))};const a=e=>{if(t.indexOf(e)<0){t.push(e);let a=document.createElement("script");a.type="text/javascript",a.src=n(e),document.body.appendChild(a)}},n=t=>{const a=e.environment.cdn+"widgets",n="dev"!==e.environment.label?"min.js":"js";return"".concat(a,"/").concat(t,".").concat(n)};switch(document.readyState){case"interactive":case"complete":e.widgetDeps();break;default:document.addEventListener("DOMContentLoaded",(()=>{e.widgetDeps()}))}}(PULSE.app),function(e){e.widgetInitialiser={},e.widgetInitialiser.addWidget=(t,n)=>{let o=n||e[a(t)],r=document.querySelector('[data-widget="'+t+'"]');r&&"true"!==r.getAttribute("data-initialised")&&(e.widgets[t]=new o(r),r.setAttribute("data-initialised",!0))},e.widgetInitialiser.addMultipleWidgetsByName=(n,o,r)=>{let i=r||document,s=o||e[a(n)],c=i.querySelectorAll('[data-widget="'+n+'"]');for(var l=0;l<c.length;l++)t(n,c[l],s)},e.widgetInitialiser.addWidgets=n=>{let o=(n||document).querySelectorAll("[data-widget]");for(var r=0;r<o.length;r++){let n=o[r].getAttribute("data-constructor"),i=o[r].getAttribute("data-widget");!n&&i&&(n=a(i)),e.hasOwnProperty(n)&&t(i,o[r],e[n])}};const t=(t,a,n)=>{"true"!==a.getAttribute("data-initialised")&&(e.widgets[t]||(e.widgets[t]=[]),e.widgets[t].push(new n(a)),a.setAttribute("data-initialised",!0))},a=e=>e.toLowerCase().replace(/(\b|-)\w/g,(function(e){return e.toUpperCase().replace(/-/,"")}))+"Widget"}(PULSE.app);